<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Android百度地图SDK图层 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="John Doe">
  
  
    <meta name="description" content="准备工作其实也没什么需要准备的，无非下载SDK和申请KEY.话说，百度的SDK开发指南虽然没有详细到每行代码都打出来，不过也足够详细了。所以想了解细节的话还是去看开发指南好点。这里只是简单记录下学习的过程。
代码清单AndroidManifest.xml
声明权限
&amp;lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot;">
  
  <meta name="description" content="准备工作其实也没什么需要准备的，无非下载SDK和申请KEY.话说，百度的SDK开发指南虽然没有详细到每行代码都打出来，不过也足够详细了。所以想了解细节的话还是去看开发指南好点。这里只是简单记录下学习的过程。
代码清单AndroidManifest.xml
声明权限
&amp;lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="Android百度地图SDK图层">
<meta property="og:url" content="http://yoursite.com/2014/12/08/andorid-baidumap-api-learning2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="准备工作其实也没什么需要准备的，无非下载SDK和申请KEY.话说，百度的SDK开发指南虽然没有详细到每行代码都打出来，不过也足够详细了。所以想了解细节的话还是去看开发指南好点。这里只是简单记录下学习的过程。
代码清单AndroidManifest.xml
声明权限
&amp;lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot;">
<meta property="og:image" content="http://treizeor.qiniudn.com/img/Screenshot_2014-12-08-17-39-26.png?imageMogr2/thumbnail/!50p">
<meta property="og:image" content="http://treizeor.qiniudn.com/img/Screenshot_2014-12-08-17-40-11.png?imageMogr2/thumbnail/!50p">
<meta property="og:updated_time" content="2015-11-25T15:40:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android百度地图SDK图层">
<meta name="twitter:description" content="准备工作其实也没什么需要准备的，无非下载SDK和申请KEY.话说，百度的SDK开发指南虽然没有详细到每行代码都打出来，不过也足够详细了。所以想了解细节的话还是去看开发指南好点。这里只是简单记录下学习的过程。
代码清单AndroidManifest.xml
声明权限
&amp;lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot;">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Hexo</a></h1>
    <p><a href="/"></a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2014/12/08/andorid-baidumap-api-learning2/">
  <time datetime="2014-12-08T07:00:00.000Z">
    2014-12-08
  </time>
</a>
    
    
  
    <h1 class="title">Android百度地图SDK图层</h1>
  

  </header>
  
  <div class="entry">
    
      <h3 id="准备工作">准备工作</h3><p>其实也没什么需要准备的，无非下载<a href="http://developer.baidu.com/map/index.php?title=androidsdk/sdkandev-download" target="_blank" rel="external"><strong>SDK</strong></a>和申请<a href="http://lbsyun.baidu.com/apiconsole/key" target="_blank" rel="external"><strong>KEY</strong></a>.话说，百度的SDK<a href="http://developer.baidu.com/map/index.php?title=androidsdk/guide/introduction" target="_blank" rel="external"><strong>开发指南</strong></a>虽然没有详细到每行代码都打出来，不过也足够详细了。所以想了解细节的话还是去看开发指南好点。这里只是简单记录下学习的过程。</p>
<h3 id="代码清单">代码清单</h3><p>AndroidManifest.xml</p>
<p>声明权限</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.GET_ACCOUNTS"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.USE_CREDENTIALS"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.MANAGE_ACCOUNTS"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.AUTHENTICATE_ACCOUNTS"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"com.android.launcher.permission.READ_SETTINGS"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.CHANGE_WIFI_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.READ_PHONE_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.BROADCAST_STICKY"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.WRITE_SETTINGS"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">"android.permission.READ_PHONE_STATE"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<code>application</code>标签中设置AccessKey</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta-data</span></span><br><span class="line">            <span class="attribute">android:name</span>=<span class="value">"com.baidu.lbsapi.API_KEY"</span></span><br><span class="line">            <span class="attribute">android:value</span>=<span class="value">"key"</span> /&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- key:开发者申请的key,即准备工作中的密钥ak --&gt;</span></span><br></pre></td></tr></table></figure>
<p>菜单menu.xml</p>
<p>为了方便，我把各种功能的实现都放到了菜单里</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">menu</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attribute">xmlns:tools</span>=<span class="value">"http://schemas.android.com/tools"</span></span><br><span class="line">    <span class="attribute">tools:context</span>=<span class="value">"com.example.baidumaptest.MainActivity"</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/map_type_satellite"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"卫星地图"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/set_traffic_enable"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"交通图"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/set_baiduheatmap_enable"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"百度城市热力图"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/set_self_heatmap"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"构建自有热力图"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/polygon_options"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"几何图形覆盖物"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/text_options"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"文字覆盖物"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/pop_options"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"弹出窗覆盖物"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/groud_overlay"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"地形图图层"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:id</span>=<span class="value">"@+id/baidumap_clear"</span></span><br><span class="line">        <span class="attribute">android:orderInCategory</span>=<span class="value">"100"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"never"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"清除标注及覆盖物"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:icon</span>=<span class="value">"@drawable/icon_marka"</span></span><br><span class="line">        <span class="attribute">android:showAsAction</span>=<span class="value">"always"</span></span><br><span class="line">        <span class="attribute">android:title</span>=<span class="value">"标注覆盖物"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">                <span class="attribute">android:id</span>=<span class="value">"@+id/marker_clear"</span></span><br><span class="line">                <span class="attribute">android:title</span>=<span class="value">"清除标注"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">                <span class="attribute">android:id</span>=<span class="value">"@+id/marker_reset"</span></span><br><span class="line">                <span class="attribute">android:title</span>=<span class="value">"重置标注"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>MainActivity.java</p>
<p>主要还是在各种图层和覆盖物的应用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.baidumaptest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.SDKInitializer;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.BaiduMap;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.BitmapDescriptor;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.BitmapDescriptorFactory;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.Gradient;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.GroundOverlayOptions;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.HeatMap;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.InfoWindow;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.MapView;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.Marker;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.MarkerOptions;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.OverlayOptions;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.PolygonOptions;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.Stroke;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.map.TextOptions;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.model.LatLng;</span><br><span class="line"><span class="keyword">import</span> com.baidu.mapapi.model.LatLngBounds;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	MapView mMapView = <span class="keyword">null</span>;</span><br><span class="line">	BaiduMap mBaiduMap = <span class="keyword">null</span>;</span><br><span class="line">	Marker marker;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">		<span class="comment">// 在使用SDK各组件前初始化context信息，需要在setContentView前实现</span></span><br><span class="line">		SDKInitializer.initialize(getApplicationContext());</span><br><span class="line">		setContentView(R.layout.activity_main);</span><br><span class="line">		mMapView = (MapView) findViewById(R.id.bmapView);</span><br><span class="line">		mBaiduMap = mMapView.getMap();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.onDestroy();</span><br><span class="line">		mMapView.onDestroy();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onPause();</span><br><span class="line">		mMapView.onPause();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onResume();</span><br><span class="line">		mMapView.onResume();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Inflate the menu; this adds items to the action bar if it is present.</span></span><br><span class="line">		getMenuInflater().inflate(R.menu.main, menu);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (item.getItemId()) &#123;</span><br><span class="line">		<span class="keyword">case</span> R.id.map_type_satellite:</span><br><span class="line">			<span class="comment">// 卫星地图</span></span><br><span class="line">			mBaiduMap.setMapType(BaiduMap.MAP_TYPE_SATELLITE);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.set_traffic_enable:</span><br><span class="line">			<span class="comment">// 交通图</span></span><br><span class="line">			mBaiduMap.setTrafficEnabled(<span class="keyword">true</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.set_baiduheatmap_enable:</span><br><span class="line">			<span class="comment">// 百度城市热力图</span></span><br><span class="line">			mBaiduMap.setBaiduHeatMapEnabled(<span class="keyword">true</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.marker_reset:</span><br><span class="line">			<span class="keyword">if</span> (marker != <span class="keyword">null</span>) &#123;</span><br><span class="line">				marker.remove();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 定义Marker坐标点</span></span><br><span class="line">			LatLng point = <span class="keyword">new</span> LatLng(<span class="number">39.963175</span>, <span class="number">116.400244</span>);</span><br><span class="line">			<span class="comment">// 构建Marker图标</span></span><br><span class="line">			BitmapDescriptor bitmap = BitmapDescriptorFactory</span><br><span class="line">					.fromResource(R.drawable.icon_marka);</span><br><span class="line">			<span class="comment">// 构建MarkerOption，用于在地图上添加Marker</span></span><br><span class="line">			OverlayOptions option = <span class="keyword">new</span> MarkerOptions().position(point) <span class="comment">// 设置marker位置</span></span><br><span class="line">					.icon(bitmap) <span class="comment">// 设置marker图标</span></span><br><span class="line">					.zIndex(<span class="number">9</span>) <span class="comment">// 设置marker所在层级</span></span><br><span class="line">					.draggable(<span class="keyword">true</span>); <span class="comment">// 设置可手势拖拽</span></span><br><span class="line">			<span class="comment">// 在地图上添加Marker,并显示</span></span><br><span class="line">			marker = (Marker) mBaiduMap.addOverlay(option);</span><br><span class="line"></span><br><span class="line">			mBaiduMap</span><br><span class="line">					.setOnMarkerClickListener(<span class="keyword">new</span> BaiduMap.OnMarkerClickListener() &#123;</span><br><span class="line"></span><br><span class="line">						<span class="annotation">@Override</span></span><br><span class="line">						<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onMarkerClick</span><span class="params">(Marker marker)</span> </span>&#123;</span><br><span class="line">							showPopOptions(marker.getPosition());</span><br><span class="line">							<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 调用BaiduMap对象的setOnMarkerDragListener方法设置marker拖拽到监听</span></span><br><span class="line">			mBaiduMap</span><br><span class="line">					.setOnMarkerDragListener(<span class="keyword">new</span> BaiduMap.OnMarkerDragListener() &#123;</span><br><span class="line"></span><br><span class="line">						<span class="annotation">@Override</span></span><br><span class="line">						<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMarkerDragStart</span><span class="params">(Marker marker)</span> </span>&#123;</span><br><span class="line">							<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">							System.out.println(<span class="string">"--拖拽开始--"</span>);</span><br><span class="line">							Toast.makeText(getApplicationContext(), <span class="string">"拖拽开始"</span>,</span><br><span class="line">									Toast.LENGTH_LONG).show();</span><br><span class="line">						&#125;</span><br><span class="line"></span><br><span class="line">						<span class="annotation">@Override</span></span><br><span class="line">						<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMarkerDragEnd</span><span class="params">(Marker marker)</span> </span>&#123;</span><br><span class="line">							<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">							System.out.println(<span class="string">"--拖拽结束--"</span>);</span><br><span class="line"></span><br><span class="line">						&#125;</span><br><span class="line"></span><br><span class="line">						<span class="annotation">@Override</span></span><br><span class="line">						<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMarkerDrag</span><span class="params">(Marker marker)</span> </span>&#123;</span><br><span class="line">							<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">							System.out.println(<span class="string">"--拖拽中--"</span>);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.marker_clear:</span><br><span class="line">			<span class="comment">// 移除标注物</span></span><br><span class="line">			marker.remove();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.polygon_options:</span><br><span class="line">			<span class="comment">// 定义多边形的五个顶点</span></span><br><span class="line">			LatLng pt1 = <span class="keyword">new</span> LatLng(<span class="number">39.93923</span>, <span class="number">116.357428</span>);</span><br><span class="line">			LatLng pt2 = <span class="keyword">new</span> LatLng(<span class="number">39.91923</span>, <span class="number">116.327428</span>);</span><br><span class="line">			LatLng pt3 = <span class="keyword">new</span> LatLng(<span class="number">39.89923</span>, <span class="number">116.347428</span>);</span><br><span class="line">			LatLng pt4 = <span class="keyword">new</span> LatLng(<span class="number">39.89923</span>, <span class="number">116.367428</span>);</span><br><span class="line">			LatLng pt5 = <span class="keyword">new</span> LatLng(<span class="number">39.91923</span>, <span class="number">116.387428</span>);</span><br><span class="line">			List&lt;LatLng&gt; pts = <span class="keyword">new</span> ArrayList&lt;LatLng&gt;();</span><br><span class="line">			pts.add(pt1);</span><br><span class="line">			pts.add(pt2);</span><br><span class="line">			pts.add(pt3);</span><br><span class="line">			pts.add(pt4);</span><br><span class="line">			pts.add(pt5);</span><br><span class="line">			<span class="comment">// 构建多边形的option对象</span></span><br><span class="line">			OverlayOptions polygonOptions = <span class="keyword">new</span> PolygonOptions().points(pts)</span><br><span class="line">					.stroke(<span class="keyword">new</span> Stroke(<span class="number">5</span>, <span class="number">0xAA00FF00</span>)).fillColor(<span class="number">0xAAFF0000</span>);</span><br><span class="line">			<span class="comment">// 在地图上显示多边形</span></span><br><span class="line">			mBaiduMap.addOverlay(polygonOptions);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.text_options:</span><br><span class="line">			LatLng textLatLng = <span class="keyword">new</span> LatLng(<span class="number">39.86923</span>, <span class="number">116.397428</span>);</span><br><span class="line">			OverlayOptions textOptions = <span class="keyword">new</span> TextOptions().bgColor(<span class="number">0xAAFFFF00</span>)</span><br><span class="line">					.text(<span class="string">"TREIZE到此一游"</span>).fontColor(<span class="number">0xFFFF0000</span>).fontSize(<span class="number">30</span>)</span><br><span class="line">					.position(textLatLng).rotate(-<span class="number">45</span>); <span class="comment">// 45度的忧桑:)</span></span><br><span class="line">			mBaiduMap.addOverlay(textOptions);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.pop_options:</span><br><span class="line">			<span class="comment">// 定义用于显示该InfoWindow的坐标点</span></span><br><span class="line">			LatLng pt = <span class="keyword">new</span> LatLng(<span class="number">39.86923</span>, <span class="number">116.397428</span>);</span><br><span class="line">			showPopOptions(pt);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.groud_overlay:</span><br><span class="line">			<span class="comment">// 定义Ground的显示地理范围</span></span><br><span class="line">			LatLng southwest = <span class="keyword">new</span> LatLng(<span class="number">39.92235</span>, <span class="number">116.380338</span>);</span><br><span class="line">			LatLng northeast = <span class="keyword">new</span> LatLng(<span class="number">39.947246</span>, <span class="number">116.414977</span>);</span><br><span class="line">			LatLngBounds bounds = <span class="keyword">new</span> LatLngBounds.Builder().include(northeast)</span><br><span class="line">					.include(southwest).build();</span><br><span class="line">			<span class="comment">// 定义Ground显示的图片</span></span><br><span class="line">			BitmapDescriptor overlay = BitmapDescriptorFactory</span><br><span class="line">					.fromResource(R.drawable.ground_overlay);</span><br><span class="line">			OverlayOptions overlayOptions = <span class="keyword">new</span> GroundOverlayOptions()</span><br><span class="line">					.positionFromBounds(bounds).image(overlay)</span><br><span class="line">					.transparency(<span class="number">0.8f</span>);</span><br><span class="line">			mBaiduMap.addOverlay(overlayOptions);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> R.id.baidumap_clear:</span><br><span class="line">			mBaiduMap.clear();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 构建自有热力图</span></span><br><span class="line">		<span class="keyword">case</span> R.id.set_self_heatmap:</span><br><span class="line">			<span class="comment">// 设置渐变颜色值</span></span><br><span class="line">			<span class="keyword">int</span>[] DEFAULT_GRADIENT_COLORS = &#123; Color.rgb(<span class="number">102</span>, <span class="number">225</span>, <span class="number">0</span>),</span><br><span class="line">					Color.rgb(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>) &#125;;</span><br><span class="line">			<span class="comment">// 设置渐变颜色起始值</span></span><br><span class="line">			<span class="keyword">float</span>[] DEFAULT_GRADIENT_START_POINTS = &#123; <span class="number">0.2f</span>, <span class="number">1f</span> &#125;;</span><br><span class="line">			<span class="comment">// 构造颜色渐变对象</span></span><br><span class="line">			Gradient gradient = <span class="keyword">new</span> Gradient(DEFAULT_GRADIENT_COLORS,</span><br><span class="line">					DEFAULT_GRADIENT_START_POINTS);</span><br><span class="line">			<span class="comment">// 准备数据</span></span><br><span class="line">			<span class="comment">// 以下数据为随机生成地理位置点，开发者根据自己的实际业务，传入自有位置数据即可</span></span><br><span class="line">			List&lt;LatLng&gt; randomLatLngs = <span class="keyword">new</span> ArrayList&lt;LatLng&gt;();</span><br><span class="line">			Random random = <span class="keyword">new</span> Random();</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">500</span>; i++) &#123;</span><br><span class="line">				<span class="keyword">int</span> rlat = random.nextInt(<span class="number">370000</span>);</span><br><span class="line">				<span class="keyword">int</span> rlng = random.nextInt(<span class="number">370000</span>);</span><br><span class="line">				<span class="keyword">int</span> lat = <span class="number">39780000</span> + rlat;</span><br><span class="line">				<span class="keyword">int</span> lng = <span class="number">116220000</span> + rlng;</span><br><span class="line">				LatLng latLng = <span class="keyword">new</span> LatLng(lat / <span class="number">1E6</span>, lng / <span class="number">1E6</span>);</span><br><span class="line">				randomLatLngs.add(latLng);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 添加、显示热力图</span></span><br><span class="line">			HeatMap heatMap = <span class="keyword">new</span> HeatMap.Builder().data(randomLatLngs)</span><br><span class="line">					.gradient(gradient).build();</span><br><span class="line">			mBaiduMap.addHeatMap(heatMap);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showPopOptions</span><span class="params">(LatLng pt)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 创建InfoWindow展示的View</span></span><br><span class="line">		Button button = <span class="keyword">new</span> Button(getApplicationContext());</span><br><span class="line">		button.setText(<span class="string">"弹出窗"</span>);</span><br><span class="line">		button.setTextColor(<span class="number">0xFFFF0000</span>);</span><br><span class="line">		button.setBackgroundResource(R.drawable.popup);</span><br><span class="line">		<span class="comment">// 定义用于显示该InfoWindow的坐标点</span></span><br><span class="line">		<span class="comment">// LatLng pt = new LatLng(39.86923, 116.397428);</span></span><br><span class="line">		<span class="comment">// 创建InfoWindow，传入View，坐标，偏移量</span></span><br><span class="line">		InfoWindow mInfoWindow = <span class="keyword">new</span> InfoWindow(button, pt, -<span class="number">47</span>);</span><br><span class="line">		<span class="comment">// 显示InfoWindow</span></span><br><span class="line">		mBaiduMap.showInfoWindow(mInfoWindow);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="效果图">效果图</h3><p><img src="http://treizeor.qiniudn.com/img/Screenshot_2014-12-08-17-39-26.png?imageMogr2/thumbnail/!50p" alt="效果图1"><br><img src="http://treizeor.qiniudn.com/img/Screenshot_2014-12-08-17-40-11.png?imageMogr2/thumbnail/!50p" alt="效果图1"></p>

    
  </div>
  <footer>
    
      
  <div class="categories">
    <a class="categories-link" href="/categories/learning/">learning</a>
  </div>

      
  <div class="tags">
    <a class="tags-link" href="/tags/android/">android</a>
  </div>

    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment">
  <h1 class="title">评论</h1>
  <div class="ds-thread" data-title="Android百度地图SDK图层">
  </div>
</section>
</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2015 <a href="/">John Doe</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'mindofme' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>